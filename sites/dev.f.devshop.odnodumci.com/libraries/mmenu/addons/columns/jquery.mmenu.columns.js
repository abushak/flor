/*
 * jQuery mmenu columns add-on
 * mmenu.frebsite.nl
 *
 * Copyright (c) Fred Heusschen
 */
!function(s){var i="mmenu",e="columns";s[i].addons[e]={setup:function(){var a=this.opts[e];this.conf[e];if(l=s[i].glbl,"boolean"==typeof a&&(a={add:a}),"number"==typeof a&&(a={add:!0,visible:a}),"object"!=typeof a&&(a={}),"number"==typeof a.visible&&(a.visible={min:a.visible,max:a.visible}),a=this.opts[e]=s.extend(!0,{},s[i].defaults[e],a),a.add){a.visible.min=Math.max(1,Math.min(6,a.visible.min)),a.visible.max=Math.max(a.visible.min,Math.min(6,a.visible.max));for(var t=this.opts.offCanvas?this.$menu.add(l.$html):this.$menu,d="",o=0;o<=a.visible.max;o++)d+=" "+n.columns+"-"+o;d.length&&(d=d.slice(1));var m=function(s){var i=this.$pnls.children("."+n.subopened).length;s&&!s.hasClass(n.subopened)&&i++,i=Math.min(a.visible.max,Math.max(a.visible.min,i)),t.removeClass(d).addClass(n.columns+"-"+i)},h=function(i){i=i||this.$pnls.children("."+n.opened),this.$pnls.children("."+n.panel).removeClass(d).filter("."+n.subopened).add(i).slice(-a.visible.max).each(function(i){s(this).addClass(n.columns+"-"+i)})};this.bind("initMenu:after",function(){this.$menu.addClass(n.columns)}),this.bind("openPanel:start",m),this.bind("openPanel:start",h)}},add:function(){n=s[i]._c,a=s[i]._d,t=s[i]._e,n.add("columns")},clickAnchor:function(i,a){if(!this.opts[e].add)return!1;if(a){var t=i.attr("href");if(t.length>1&&"#"==t.slice(0,1))try{var l=s(t,this.$menu);if(l.is("."+n.panel))for(var d=parseInt(i.closest("."+n.panel).attr("class").split(n.columns+"-")[1].split(" ")[0],10)+1;d>0;){var o=this.$pnls.children("."+n.columns+"-"+d);if(!o.length){d=-1;break}d++,o.removeClass(n.subopened).removeClass(n.opened).removeClass(n.highest).addClass(n.hidden)}}catch(m){}}}},s[i].defaults[e]={add:!1,visible:{min:1,max:3}};var n,a,t,l}(jQuery);